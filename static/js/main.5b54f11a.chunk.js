(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[1],{12:function(e,t,n){"use strict";n.d(t,"f",(function(){return s})),n.d(t,"e",(function(){return u})),n.d(t,"g",(function(){return d})),n.d(t,"d",(function(){return j})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return b}));var r=n(27),c=n(3),a={user:{name:null,email:null},token:null,isLoggedIn:!1},o=Object(c.d)({name:"auth",initialState:a,reducers:{setCredentials:function(e,t){var n=t.payload,r=n.user,c=n.token;e.user=r,e.token=c,e.isLoggedIn=!0},removeCredentials:function(){return a},setCurrentUser:function(e,t){var n=t.payload;e.user=Object(r.a)({},n),e.isLoggedIn=!0}}});t.a=o.reducer;var i=o.actions,s=i.setCredentials,u=i.removeCredentials,d=i.setCurrentUser,j=function(e){return e.auth.user.name},l=function(e){return e.auth.token},b=function(e){return e.auth.isLoggedIn}},26:function(e,t,n){"use strict";n.d(t,"e",(function(){return a})),n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return u}));var r=n(41),c=n(13),a=Object(r.a)({reducerPath:"usersApi",baseQuery:Object(c.d)({baseUrl:"https://connections-api.herokuapp.com/",prepareHeaders:function(e,t){var n=(0,t.getState)().auth.token;return n&&e.set("authorization","Bearer ".concat(n)),e}}),tagTypes:["Users"],endpoints:function(e){return{getCurrentUser:e.query({query:function(){return"/users/current"},providesTags:["Users"]}),signupUser:e.mutation({query:function(e){return{url:"/users/signup",method:"POST",body:{name:e.name,email:e.email,password:e.password},transformResponse:function(e){return e.data}}},invalidatesTags:["Users"]}),loginUser:e.mutation({query:function(e){return{url:"/users/login",method:"POST",body:{email:e.email,password:e.password}}},invalidatesTags:["Users"]}),logoutUser:e.mutation({query:function(){return{url:"users/logout",method:"POST"}},invalidatesTags:["Users"]})}}}),o=a.useGetCurrentUserQuery,i=a.useSignupUserMutation,s=a.useLoginUserMutation,u=a.useLogoutUserMutation},40:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return s}));var r=n(41),c=n(13),a=Object(r.a)({reducerPath:"contactsApi",baseQuery:Object(c.d)({baseUrl:"https://connections-api.herokuapp.com/",prepareHeaders:function(e,t){var n=(0,t.getState)().auth.token;return n&&e.set("authorization","Bearer ".concat(n)),e}}),tagTypes:["Contacts"],endpoints:function(e){return{getContacts:e.query({query:function(){return"/contacts"},providesTags:["Contacts"]}),addContact:e.mutation({query:function(e){return{url:"/contacts",method:"POST",body:{name:e.name,number:e.number}}},invalidatesTags:["Contacts"]}),deleteContact:e.mutation({query:function(e){return{url:"/contacts/".concat(e),method:"DELETE"}},invalidatesTags:["Contacts"]})}}}),o=a.useGetContactsQuery,i=a.useAddContactMutation,s=a.useDeleteContactMutation},75:function(e,t,n){},82:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(25),o=n.n(a),i=n(5),s=n(20),u=n(56),d=(n(75),n(7)),j=n(2),l=function(e){var t=e.children;return Object(j.jsx)("div",{children:t})},b=function(e){var t=e.children;return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(l,{children:t})})},O=n(12),h=n(26);function f(){return Object(j.jsxs)("div",{children:[Object(j.jsx)(s.b,{to:"/register",children:"Registration"}),Object(j.jsx)(s.b,{to:"/login",children:"LogIn"})]})}var g=function(){var e=Object(i.e)(O.b);return Object(j.jsx)("nav",{children:e&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(s.b,{to:"/home",exact:!0,children:"Home"}),Object(j.jsx)(s.b,{to:"/contacts",children:"Contacts"})]})})},p=n(52),m=n(99);function x(){var e=Object(i.d)(),t=Object(i.e)(O.d),n=Object(h.c)(),r=Object(p.a)(n,1)[0];return Object(j.jsxs)("div",{children:[Object(j.jsxs)("span",{children:["Welcome, ",t]}),Object(j.jsx)(m.a,{variant:"contained",color:"secondary",type:"button",size:"small",onClick:function(){r(),e(Object(O.e)())},children:"Log Out"})]})}function v(){var e=Object(i.e)(O.b),t=Object(i.d)(),n=Object(i.e)(O.c),c=Object(h.a)(n).data;return Object(r.useEffect)((function(){null!==n&&t(Object(O.g)(c))}),[n,t,c]),Object(j.jsxs)("header",{children:[Object(j.jsx)(g,{}),e?Object(j.jsx)(x,{}):Object(j.jsx)(f,{})]})}var y=n(27),T=n(45),C=["children","redirectTo"];function k(e){var t=e.children,n=e.redirectTo,r=void 0===n?"/":n,c=Object(T.a)(e,C),a=Object(i.e)(O.b);return Object(j.jsx)(d.b,Object(y.a)(Object(y.a)({},c),{},{children:a?t:Object(j.jsx)(d.a,{to:r})}))}var U=["children","restricted","redirectTo"];function w(e){var t=e.children,n=e.restricted,r=void 0!==n&&n,c=e.redirectTo,a=void 0===c?"/":c,o=Object(T.a)(e,U),s=Object(i.e)(O.b)&&r;return Object(j.jsx)(d.b,Object(y.a)(Object(y.a)({},o),{},{children:s?Object(j.jsx)(d.a,{to:a}):t}))}var P=n(103),S=n(104),q=Object(r.lazy)((function(){return n.e(8).then(n.bind(null,154))})),L=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(6),n.e(9)]).then(n.bind(null,164))})),z=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,163))})),I=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(4),n.e(7)]).then(n.bind(null,161))})),M=Object(P.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}}));function E(){var e=M();return Object(j.jsxs)(b,{children:[Object(j.jsx)(v,{}),Object(j.jsx)(r.Suspense,{fallback:Object(j.jsx)("div",{className:e.root,children:Object(j.jsx)(S.a,{color:"secondary"})}),children:Object(j.jsxs)(d.d,{children:[Object(j.jsx)(w,{path:"/",exact:!0,children:Object(j.jsx)("h1",{children:"Hello, start to work"})}),Object(j.jsx)(w,{path:"/register",redirectTo:"/login",restricted:!0,children:Object(j.jsx)(L,{})}),Object(j.jsx)(w,{path:"/login",redirectTo:"/contacts",restricted:!0,children:Object(j.jsx)(z,{})}),Object(j.jsx)(k,{path:"/home",children:Object(j.jsx)(q,{})}),Object(j.jsx)(k,{path:"/contacts",redirectTo:"/login",children:Object(j.jsx)(I,{})})]})})]})}var A,H=n(63),Q=n(33),B=n(3),D=n(23),F=n(62),G=n.n(F),J=n(40),R={key:"auth",storage:G.a,whitelist:["token"]},N=Object(B.a)({reducer:(A={},Object(Q.a)(A,J.a.reducerPath,J.a.reducer),Object(Q.a)(A,h.e.reducerPath,h.e.reducer),Object(Q.a)(A,"auth",Object(D.g)(R,O.a)),A),middleware:function(e){return[].concat(Object(H.a)(e({serializableCheck:{ignoredActions:[D.a,D.f,D.b,D.c,D.d,D.e]}})),[J.a.middleware,h.e.middleware])},devTools:!1}),W=Object(D.h)(N);n(81);o.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(i.a,{store:N,children:Object(j.jsx)(s.a,{children:Object(j.jsx)(u.a,{loading:null,persistor:W,children:Object(j.jsx)(E,{})})})})}),document.getElementById("root"))}},[[82,2,3]]]);
//# sourceMappingURL=main.5b54f11a.chunk.js.map