(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[1],{12:function(e,t,n){"use strict";n.d(t,"f",(function(){return o})),n.d(t,"e",(function(){return u})),n.d(t,"g",(function(){return d})),n.d(t,"d",(function(){return l})),n.d(t,"c",(function(){return j})),n.d(t,"b",(function(){return b}));var r=n(27),c=n(3),a={user:{name:null,email:null},token:null,isLoggedIn:!1},i=Object(c.d)({name:"auth",initialState:a,reducers:{setCredentials:function(e,t){var n=t.payload,r=n.user,c=n.token;e.user=r,e.token=c,e.isLoggedIn=!0},removeCredentials:function(){return a},setCurrentUser:function(e,t){var n=t.payload;e.user=Object(r.a)({},n),e.isLoggedIn=!0}}});t.a=i.reducer;var s=i.actions,o=s.setCredentials,u=s.removeCredentials,d=s.setCurrentUser,l=function(e){return e.auth.user.name},j=function(e){return e.auth.token},b=function(e){return e.auth.isLoggedIn}},26:function(e,t,n){"use strict";n.d(t,"e",(function(){return a})),n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return u}));var r=n(41),c=n(13),a=Object(r.a)({reducerPath:"usersApi",baseQuery:Object(c.d)({baseUrl:"https://connections-api.herokuapp.com/",prepareHeaders:function(e,t){var n=(0,t.getState)().auth.token;return n&&e.set("authorization","Bearer ".concat(n)),e}}),tagTypes:["Users"],endpoints:function(e){return{getCurrentUser:e.query({query:function(){return"/users/current"},providesTags:["Users"]}),signupUser:e.mutation({query:function(e){return{url:"/users/signup",method:"POST",body:{name:e.name,email:e.email,password:e.password},transformResponse:function(e){return e.data}}},invalidatesTags:["Users"]}),loginUser:e.mutation({query:function(e){return{url:"/users/login",method:"POST",body:{email:e.email,password:e.password}}},invalidatesTags:["Users"]}),logoutUser:e.mutation({query:function(){return{url:"users/logout",method:"POST"}},invalidatesTags:["Users"]})}}}),i=a.useGetCurrentUserQuery,s=a.useSignupUserMutation,o=a.useLoginUserMutation,u=a.useLogoutUserMutation},40:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return i})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return o}));var r=n(41),c=n(13),a=Object(r.a)({reducerPath:"contactsApi",baseQuery:Object(c.d)({baseUrl:"https://connections-api.herokuapp.com/",prepareHeaders:function(e,t){var n=(0,t.getState)().auth.token;return n&&e.set("authorization","Bearer ".concat(n)),e}}),tagTypes:["Contacts"],endpoints:function(e){return{getContacts:e.query({query:function(){return"/contacts"},providesTags:["Contacts"]}),addContact:e.mutation({query:function(e){return{url:"/contacts",method:"POST",body:{name:e.name,number:e.number}}},invalidatesTags:["Contacts"]}),deleteContact:e.mutation({query:function(e){return{url:"/contacts/".concat(e),method:"DELETE"}},invalidatesTags:["Contacts"]})}}}),i=a.useGetContactsQuery,s=a.useAddContactMutation,o=a.useDeleteContactMutation},49:function(e,t,n){e.exports={link:"AuthNav_link__3dVlO"}},51:function(e,t,n){e.exports={link:"Navigation_link__g1FIV"}},61:function(e,t,n){e.exports={span:"UserMenu_span__Hb31N"}},78:function(e,t,n){},79:function(e,t,n){},86:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(25),i=n.n(a),s=n(5),o=n(20),u=n(58),d=(n(78),n(7)),l=(n(79),n(2)),j=function(e){var t=e.children;return Object(l.jsx)("div",{children:t})},b=function(e){var t=e.children;return Object(l.jsx)(l.Fragment,{children:Object(l.jsx)(j,{children:t})})},O=n(12),h=n(26),f=n(49),g=n.n(f);function p(){return Object(l.jsxs)("div",{children:[Object(l.jsx)(o.b,{to:"/register",className:g.a.link,children:"Registration"}),Object(l.jsx)(o.b,{to:"/login",className:g.a.link,children:"LogIn"})]})}var m=n(51),x=n.n(m),v=function(){var e=Object(s.e)(O.b);return Object(l.jsx)("nav",{children:e&&Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(o.b,{to:"/home",exact:!0,className:x.a.link,children:"Home"}),Object(l.jsx)(o.b,{to:"/contacts",className:x.a.link,children:"Contacts"})]})})},y=n(54),k=n(103),T=n(61),C=n.n(T);function U(){var e=Object(s.d)(),t=Object(s.e)(O.d),n=Object(h.c)(),r=Object(y.a)(n,1)[0];return Object(l.jsxs)("div",{children:[Object(l.jsxs)("span",{className:C.a.span,children:["Welcome, ",t]}),Object(l.jsx)(k.a,{variant:"contained",color:"secondary",type:"button",size:"small",onClick:function(){r(),e(Object(O.e)())},children:"Log Out"})]})}function w(){var e=Object(s.e)(O.b),t=Object(s.d)(),n=Object(s.e)(O.c),c=Object(h.a)(n).data;return Object(r.useEffect)((function(){null!==n&&t(Object(O.g)(c))}),[n,t,c]),Object(l.jsxs)("header",{children:[Object(l.jsx)(v,{}),e?Object(l.jsx)(U,{}):Object(l.jsx)(p,{})]})}var P=n(27),S=n(45),q=["children","redirectTo"];function L(e){var t=e.children,n=e.redirectTo,r=void 0===n?"/":n,c=Object(S.a)(e,q),a=Object(s.e)(O.b);return Object(l.jsx)(d.b,Object(P.a)(Object(P.a)({},c),{},{children:a?t:Object(l.jsx)(d.a,{to:r})}))}var N=["children","restricted","redirectTo"];function _(e){var t=e.children,n=e.restricted,r=void 0!==n&&n,c=e.redirectTo,a=void 0===c?"/":c,i=Object(S.a)(e,N),o=Object(s.e)(O.b)&&r;return Object(l.jsx)(d.b,Object(P.a)(Object(P.a)({},i),{},{children:o?Object(l.jsx)(d.a,{to:a}):t}))}var z=n(107),I=n(108),M=Object(r.lazy)((function(){return n.e(8).then(n.bind(null,158))})),A=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(6),n.e(9)]).then(n.bind(null,168))})),E=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,167))})),H=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(4),n.e(7)]).then(n.bind(null,165))})),Q=Object(z.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}}));function B(){var e=Q();return Object(l.jsxs)(b,{children:[Object(l.jsx)(w,{}),Object(l.jsx)(r.Suspense,{fallback:Object(l.jsx)("div",{className:e.root,children:Object(l.jsx)(I.a,{color:"secondary"})}),children:Object(l.jsxs)(d.d,{children:[Object(l.jsx)(_,{path:"/",exact:!0,children:Object(l.jsx)("h1",{children:"Hello, start to work"})}),Object(l.jsx)(_,{path:"/register",redirectTo:"/login",restricted:!0,children:Object(l.jsx)(A,{})}),Object(l.jsx)(_,{path:"/login",redirectTo:"/contacts",restricted:!0,children:Object(l.jsx)(E,{})}),Object(l.jsx)(L,{path:"/home",children:Object(l.jsx)(M,{})}),Object(l.jsx)(L,{path:"/contacts",redirectTo:"/login",children:Object(l.jsx)(H,{})})]})})]})}var F,D=n(66),G=n(33),J=n(3),R=n(23),V=n(65),W=n.n(V),K=n(40),X={key:"auth",storage:W.a,whitelist:["token"]},Y=Object(J.a)({reducer:(F={},Object(G.a)(F,K.a.reducerPath,K.a.reducer),Object(G.a)(F,h.e.reducerPath,h.e.reducer),Object(G.a)(F,"auth",Object(R.g)(X,O.a)),F),middleware:function(e){return[].concat(Object(D.a)(e({serializableCheck:{ignoredActions:[R.a,R.f,R.b,R.c,R.d,R.e]}})),[K.a.middleware,h.e.middleware])},devTools:!1}),Z=Object(R.h)(Y);n(85);i.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(s.a,{store:Y,children:Object(l.jsx)(o.a,{children:Object(l.jsx)(u.a,{loading:null,persistor:Z,children:Object(l.jsx)(B,{})})})})}),document.getElementById("root"))}},[[86,2,3]]]);
//# sourceMappingURL=main.ef466f78.chunk.js.map